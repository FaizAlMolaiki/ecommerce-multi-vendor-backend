{{ ... }}

ูุธุงู ุฅุดุนุงุฑุงุช ุดุงูู ููุชูุฏู ููุชุทุจููุ ูุฏุนู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ ุนุจุฑ Firebase Cloud Messaging ูุงูุฅุดุนุงุฑุงุช ุงููุญููุฉ.

## ๐ ุงูููุฒุงุช

### ๐ฏ **ูููุงุช ุงูุฅุดุนุงุฑุงุช ุงููุฏุนููุฉ:**

| ุงูููุงุฉ | ุงูุญุงูุฉ | ุงููุตู |
|-------|--------|-------|
| **Database** | โ ูุดุท | ุญูุธ ุฌููุน ุงูุฅุดุนุงุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| **WebSocket** | โ ูุดุท | ุฅุดุนุงุฑุงุช ููุฑูุฉ ูููุญุฉ ุงูุชุญูู |
| **FCM Push** | โ ุฌุงูุฒ | ุฅุดุนุงุฑุงุช ุงูููุจุงูู ุนุจุฑ Firebase |
| **Email** | โ ุฌุงูุฒ | ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| **SMS** | โ๏ธ ูุณุชูุจูู | ุฅุดุนุงุฑุงุช ุงูุฑุณุงุฆู ุงููุตูุฉ |

---

## ๐ฆ ุงููููุงุช ุงููุทููุจุฉ
- **ุฅุดุนุงุฑุงุช ููุฑูุฉ**: ุนุจุฑ Firebase Cloud Messaging
- **ุฅุดุนุงุฑุงุช ูุญููุฉ**: ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุฃููุงุน ูุชุนุฏุฏุฉ**: ุทูุจุงุชุ ููุชุฌุงุชุ ูุชุงุฌุฑุ ุนุฑูุถุ ูุธุงู
- **ุฃููููุงุช ูุฎุชููุฉ**: ููุฎูุถุฉุ ุนุงุฏูุฉุ ุนุงููุฉุ ุนุงุฌูุฉ
- **ููุชุฑุฉ ูุชูุฏูุฉ**: ุญุณุจ ุงูููุนุ ุงูุฃููููุฉุ ุญุงูุฉ ุงููุฑุงุกุฉ
- **ุจุญุซ ุดุงูู**: ูู ุงูุนููุงู ูุงููุญุชูู

### โ ุฅุฏุงุฑุฉ ุงูุฃุฌูุฒุฉ
- **ุชุณุฌูู ุฃุฌูุฒุฉ FCM**: ุชููุงุฆู ูุน ุงูุชุทุจูู
- **ุชุญุฏูุซ ุงูุฑููุฒ**: ุนูุฏ ุชุบููุฑ ุฑูุฒ FCM
- **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชูุนูู/ุฅูุบุงุก ุชูุนูู ุงูุฃุฌูุฒุฉ
- **ุชูุธูู ุชููุงุฆู**: ููุฃุฌูุฒุฉ ุบูุฑ ุงููุดุทุฉ

### โ ููุงูุจ ุงูุฅุดุนุงุฑุงุช
- **ููุงูุจ ูุงุจูุฉ ููุชุฎุตูุต**: ูุน ูุชุบูุฑุงุช ุฏููุงููููุฉ
- **ุฅุฏุงุฑุฉ ูุฑูุฒูุฉ**: ุนุจุฑ ููุญุฉ ุงูุฅุฏุงุฑุฉ
- **ุฃููุงุน ูุชุนุฏุฏุฉ**: ููู ููุน ุฅุดุนุงุฑ ูุงูุจ ุฎุงุต

## ๐ API Endpoints

### ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู
```
GET    /api/v1/notifications/                    # ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช
GET    /api/v1/notifications/{id}/               # ุชูุงุตูู ุฅุดุนุงุฑ
POST   /api/v1/notifications/{id}/read/          # ุชุนููู ูููุฑูุก
POST   /api/v1/notifications/mark-all-read/      # ุชุนููู ุงููู ูููุฑูุก
DELETE /api/v1/notifications/{id}/delete/        # ุญุฐู ุฅุดุนุงุฑ
DELETE /api/v1/notifications/delete-all-read/    # ุญุฐู ูู ุงูููุฑูุก
GET    /api/v1/notifications/stats/              # ุฅุญุตุงุฆูุงุช ุงูุฅุดุนุงุฑุงุช
```

### ุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ FCM
```
POST   /api/v1/notifications/fcm-device/         # ุชุณุฌูู ุฌูุงุฒ ุฌุฏูุฏ
POST   /api/v1/notifications/fcm-device/update-token/  # ุชุญุฏูุซ ุฑูุฒ
POST   /api/v1/notifications/fcm-device/deactivate/    # ุฅูุบุงุก ุชูุนูู
```

### ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช (ูููุดุฑููู)
```
POST   /api/v1/notifications/admin/create/       # ุฅูุดุงุก ุฅุดุนุงุฑ
GET    /api/v1/notifications/admin/templates/    # ููุงูุจ ุงูุฅุดุนุงุฑุงุช
POST   /api/v1/notifications/admin/templates/    # ุฅูุดุงุก ูุงูุจ
```

## ๐ง ุงูุงุณุชุฎุฏุงู

### 1. ุฅุฑุณุงู ุฅุดุนุงุฑ ููุณุชุฎุฏู ูุงุญุฏ
```python
from notifications.services import NotificationService

notification = NotificationService.send_notification_to_user(
    user=user,
    title='ุนููุงู ุงูุฅุดุนุงุฑ',
    body='ูุญุชูู ุงูุฅุดุนุงุฑ',
    notification_type='order',
    priority='high',
    related_id=order.id,
    data={'order_id': str(order.id)}
)
```

### 2. ุฅุฑุณุงู ุฅุดุนุงุฑ ูุนุฏุฉ ูุณุชุฎุฏููู
```python
notifications = NotificationService.send_notification_to_users(
    user_ids=[1, 2, 3],
    title='ุฅุดุนุงุฑ ุฌูุงุนู',
    body='ูุญุชูู ุงูุฅุดุนุงุฑ',
    notification_type='promotion'
)
```

### 3. ุฅุฑุณุงู ุฅุดุนุงุฑ ุนุงู
```python
notifications = NotificationService.send_broadcast_notification(
    title='ุฅุดุนุงุฑ ุนุงู',
    body='ูุญุชูู ุงูุฅุดุนุงุฑ ูุฌููุน ุงููุณุชุฎุฏููู',
    notification_type='system'
)
```

## ๐ฏ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

| ุงูููุน | ุงููุตู | ุงูุงุณุชุฎุฏุงู |
|-------|--------|-----------|
| `order` | ุฅุดุนุงุฑุงุช ุงูุทูุจุงุช | ุทูุจ ุฌุฏูุฏุ ุชุบููุฑ ุญุงูุฉ |
| `product` | ุฅุดุนุงุฑุงุช ุงูููุชุฌุงุช | ููุชุฌ ุฌุฏูุฏุ ุชุญุฏูุซ |
| `store` | ุฅุดุนุงุฑุงุช ุงููุชุงุฌุฑ | ูุชุฌุฑ ุฌุฏูุฏุ ุชุญุฏูุซ |
| `promotion` | ุฅุดุนุงุฑุงุช ุงูุนุฑูุถ | ุนุฑุถ ุฌุฏูุฏุ ุฎุตู |
| `payment` | ุฅุดุนุงุฑุงุช ุงูุฏูุน | ุฏูุน ูุงุฌุญุ ูุดู |
| `shipping` | ุฅุดุนุงุฑุงุช ุงูุดุญู | ุดุญูุ ุชูุตูู |
| `review` | ุฅุดุนุงุฑุงุช ุงูุชููููุงุช | ุชูููู ุฌุฏูุฏ |
| `system` | ุฅุดุนุงุฑุงุช ุงููุธุงู | ุชุฑุญูุจุ ุชุญุฏูุซุงุช |

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

ูู `settings.py`:
```python
NOTIFICATIONS_CONFIG = {
    'ENABLE_FCM': True,  # ุชูุนูู Firebase
    'ENABLE_EMAIL_NOTIFICATIONS': True,  # ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ
    'ENABLE_SMS_NOTIFICATIONS': False,  # ุฅุดุนุงุฑุงุช SMS
    'AUTO_DELETE_READ_NOTIFICATIONS_DAYS': 30,  # ุญุฐู ุชููุงุฆู
    'MAX_NOTIFICATIONS_PER_USER': 1000,  # ุญุฏ ุฃูุตู
}
```

## ๐ฅ Firebase Configuration

ูุชูุนูู Firebase Cloud Messaging:

1. ุฅูุดุงุก ูุดุฑูุน Firebase
2. ุชุญููู ููู `serviceAccountKey.json`
3. ุฅุถุงูุฉ ุงููุณุงุฑ ูู `settings.py`:

```python
import firebase_admin
from firebase_admin import credentials

cred = credentials.Certificate('path/to/serviceAccountKey.json')
firebase_admin.initialize_app(cred)
```

## ๐ Management Commands

### ุชูุธูู ุงูุฅุดุนุงุฑุงุช ุงููุฏููุฉ
```bash
python manage.py cleanup_notifications --days 30
python manage.py cleanup_notifications --dry-run  # ูุนุงููุฉ
```

### ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู
```bash
python manage.py send_test_notification --user-email user@example.com
python manage.py send_test_notification --all-users
python manage.py send_test_notification --title "ุนููุงู" --body "ูุญุชูู"
```

## ๐ ุงูุฅุดุงุฑุงุช ุงูุชููุงุฆูุฉ

ุงููุธุงู ูุฑุณู ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ุนูุฏ:
- ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- ุชุบููุฑ ุญุงูุฉ ุงูุทูุจ
- ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
- ุฅูุดุงุก ูุชุฌุฑ ุฌุฏูุฏ
- ุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ
- ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ

## ๐จ ููุญุฉ ุงูุฅุฏุงุฑุฉ

ูููู ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:
- ุนุฑุถ ุฌููุน ุงูุฅุดุนุงุฑุงุช
- ููุชุฑุฉ ูุจุญุซ
- ุชุนููู ูููุฑูุก/ุบูุฑ ููุฑูุก
- ุญุฐู ุงูุฅุดุนุงุฑุงุช
- ุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ FCM
- ุฅุฏุงุฑุฉ ููุงูุจ ุงูุฅุดุนุงุฑุงุช

## ๐ฑ ุชูุงูู Flutter

ูู Flutter appุ ุงุณุชุฎุฏู ุงูู endpoints ุงููุชุงุญุฉ:

```dart
// ุฌูุจ ุงูุฅุดุนุงุฑุงุช
final notifications = await NotificationService.getNotifications();

// ุชุณุฌูู ุฌูุงุฒ FCM
await NotificationService.registerFCMDevice(token, deviceType);

// ุชุนููู ูููุฑูุก
await NotificationService.markAsRead(notificationId);
```

## ๐ ุงูุฃูุงู

- ุฌููุน endpoints ูุญููุฉ ุจู Authentication
- ุงููุณุชุฎุฏู ูุฑู ุฅุดุนุงุฑุงุชู ููุท
- endpoints ุงูุฅุฏุงุฑุฉ ูุญููุฉ ุจู Admin permissions
- ุชุดููุฑ ุฑููุฒ FCM ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฃุฏุงุก

- ููุฑุณุฉ ูุญุณูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช
- Pagination ููููุงุฆู ุงูุทูููุฉ
- ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ
- ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

1. **FCM ูุง ูุนูู**: ุชุฃูุฏ ูู ุฅุนุฏุงุฏ Firebase ุตุญูุญ
2. **ุงูุฅุดุนุงุฑุงุช ูุง ุชุตู**: ุชุญูู ูู ุญุงูุฉ ุงูุฌูุงุฒ ุงููุดุทุฉ
3. **ุฃุฎุทุงุก ุงูุฃุฐููุงุช**: ุชุฃูุฏ ูู Authentication headers
4. **ุจุทุก ุงูุงุณุชุฌุงุจุฉ**: ุงุณุชุฎุฏู Pagination ูุงูููุงุชุฑ

### Logging:
```python
import logging
logger = logging.getLogger('notifications')
logger.info('Notification sent successfully')
```

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ูุงูุฏุนูุ ุฑุงุฌุน:
- ูููุงุช ุงูููุฏ ุงููุตุฏุฑู
- Django REST Framework documentation
- Firebase Admin SDK documentation

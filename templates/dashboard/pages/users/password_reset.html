{% extends 'dashboard/layouts/form_layout.html' %}

{% block title %}إعادة تعيين كلمة المرور - {{ object.email }} - لوحة التحكم{% endblock %}

{% with page_title='إعادة تعيين كلمة المرور' %}
{% with form_title='تغيير كلمة مرور المستخدم' %}
{% with form_icon='key' %}
{% with back_url='/dashboard/users/'|add:object.id|add:'/' %}
{% with submit_text='تغيير كلمة المرور' %}

{% block form_content %}
<div class="row">
    <div class="col-md-8">
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>إعادة تعيين كلمة المرور للمستخدم:</strong> {{ object.email }}
        </div>
        
        <div class="row">
            <div class="col-md-6">
                {% include 'dashboard/components/forms/form_field.html' with field=form.new_password1 label='كلمة المرور الجديدة' required=True %}
            </div>
            <div class="col-md-6">
                {% include 'dashboard/components/forms/form_field.html' with field=form.new_password2 label='تأكيد كلمة المرور الجديدة' required=True %}
            </div>
        </div>
        
        <div class="alert alert-warning mt-3">
            <h6 class="alert-heading">
                <i class="fas fa-exclamation-triangle me-2"></i>تنبيه أمني
            </h6>
            <ul class="mb-0">
                <li>سيتم تسجيل خروج المستخدم من جميع الأجهزة بعد تغيير كلمة المرور</li>
                <li>سيحتاج المستخدم لتسجيل الدخول بكلمة المرور الجديدة</li>
                <li>تأكد من إبلاغ المستخدم بكلمة المرور الجديدة بطريقة آمنة</li>
            </ul>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">معلومات المستخدم</h6>
            </div>
            <div class="card-body">
                <div class="text-center mb-3">
                    <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px; font-size: 24px;">
                        {{ object.name.0|default:object.email.0|upper }}
                    </div>
                </div>
                
                <p><strong>البريد الإلكتروني:</strong><br>{{ object.email }}</p>
                
                <p><strong>الاسم:</strong><br>
                    {{ object.name|default:"غير محدد" }}
                </p>
                
                <p><strong>آخر دخول:</strong><br>
                    {% if object.last_login %}
                        {{ object.last_login|date:"Y-m-d H:i" }}
                    {% else %}
                        لم يسجل دخول بعد
                    {% endif %}
                </p>
                
                <p><strong>الأدوار:</strong><br>
                    <div class="mt-1">
                        {% if object.is_staff %}
                            <span class="badge bg-danger me-1">موظف</span>
                        {% endif %}
                        {% if object.is_vendor %}
                            <span class="badge bg-success me-1">بائع</span>
                        {% endif %}
                        {% if object.is_delivery %}
                            <span class="badge bg-info me-1">مندوب</span>
                        {% endif %}
                        {% if not object.is_staff and not object.is_vendor and not object.is_delivery %}
                            <span class="badge bg-secondary">عميل</span>
                        {% endif %}
                    </div>
                </p>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h6 class="mb-0">متطلبات كلمة المرور</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0 small">
                    <li class="mb-1">
                        <i class="fas fa-check text-success me-1"></i>
                        على الأقل 8 أحرف
                    </li>
                    <li class="mb-1">
                        <i class="fas fa-check text-success me-1"></i>
                        تحتوي على أحرف وأرقام
                    </li>
                    <li class="mb-1">
                        <i class="fas fa-check text-success me-1"></i>
                        لا تكون شائعة جداً
                    </li>
                    <li class="mb-1">
                        <i class="fas fa-check text-success me-1"></i>
                        لا تشبه معلومات المستخدم
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
